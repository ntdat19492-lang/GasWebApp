<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Safe Under Close Button</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style id="app-style">
        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            background: #ffffff;
        }
    </style>
</head>

<body>

<h2>Nội dung Mini App</h2>
<p>Phần body không bị nút đóng che.</p>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    function adjustSafeArea() {
        // Safe area UI mới Telegram
        const inset = tg.safeAreaInset;

        // UI mới Telegram: nút đóng cách top ~48px dưới safe area
        const closeButtonHeight = 48;

        const topPadding = inset.top + closeButtonHeight;
        const bottomPadding = inset.bottom;

        const style = document.getElementById("app-style");

        style.innerHTML = `
            body {
                margin: 0;
                padding: ${topPadding}px 16px ${bottomPadding}px 16px;
                font-family: sans-serif;
                background: #ffffff;
                box-sizing: border-box;
            }
        `;
    }

    // Áp dụng khi load
    adjustSafeArea();

    // UI mới Telegram: viewport có thể thay đổi
    tg.onEvent("viewportChanged", adjustSafeArea);
</script>

</body>
</html>
