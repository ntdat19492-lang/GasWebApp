<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Portrait Fullscreen + Safe Area</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style id="theme-style">
        :root {
            /* Safe area m·∫∑c ƒë·ªãnh */
            --top: env(safe-area-inset-top);
            --bottom: env(safe-area-inset-bottom);
        }

        body {
            margin: 0;
            padding: calc(var(--top) + 20px) 20px calc(var(--bottom) + 20px) 20px;
            font-family: sans-serif;
            background: #ffffff;
            color: #000000;
            transition: 0.2s;
            box-sizing: border-box;
        }

        .container {
            background: #f0f0f0;
            padding: 16px;
            border-radius: 12px;
        }

        .safe-view {
            margin-top: 20px;
            background: #dcdcdc;
            padding: 12px;
            border-radius: 10px;
        }

        /* L√†m v√πng d∆∞·ªõi (safe area) n·∫±m D∆Ø·ªöI n√∫t ƒë√≥ng */
        .safe-bottom {
            height: calc(env(safe-area-inset-bottom) + 16px);
        }
    </style>
</head>

<body>

<h2>Mini App Portrait + Safe View</h2>
<p>Giao di·ªán ƒëang kh√≥a h∆∞·ªõng d·ªçc v√† c√≥ v√πng Safe Area n·∫±m d∆∞·ªõi n√∫t ƒë√≥ng.</p>

<div class="container">
    ƒê√¢y l√† khu v·ª±c n·ªôi dung ch√≠nh, kh√¥ng b·ªã notch hay n√∫t ƒë√≥ng che.
</div>

<div class="safe-view">
    Safe View ‚Äì lu√¥n n·∫±m d∆∞·ªõi n√∫t ƒë√≥ng & kh√¥ng b·ªã che ·ªü fullscreen portrait.
</div>

<div class="safe-bottom"></div>

<script>
    const tg = window.Telegram.WebApp;

    tg.ready();
    tg.expand(); // m·ªü fullscreen
    tg.setScreenOrientation("portrait"); // üîí kh√≥a h∆∞·ªõng d·ªçc

    // H√†m c·∫≠p nh·∫≠t theme UI
    function applyTheme() {
        const p = tg.themeParams;
        const scheme = tg.colorScheme;

        const style = document.getElementById("theme-style");

        style.innerHTML = `
            :root {
                --top: env(safe-area-inset-top);
                --bottom: env(safe-area-inset-bottom);
            }

            body {
                margin: 0;
                padding: calc(var(--top) + 20px) 20px calc(var(--bottom) + 20px) 20px;
                font-family: sans-serif;
                background: ${p.bg_color || (scheme === "dark" ? "#0f0f0f" : "#ffffff")};
                color: ${p.text_color || (scheme === "dark" ? "#ffffff" : "#000000")};
                transition: 0.2s;
                box-sizing: border-box;
            }

            .container {
                background: ${p.secondary_bg_color || (scheme === "dark" ? "#1c1c1c" : "#f0f0f0")};
                color: inherit;
                padding: 16px;
                border-radius: 12px;
            }

            .safe-view {
                margin-top: 20px;
                background: ${p.secondary_bg_color || (scheme === "dark" ? "#1f1f1f" : "#dcdcdc")};
                padding: 12px;
                border-radius: 10px;
            }

            .safe-bottom {
                height: calc(env(safe-area-inset-bottom) + 16px);
            }
        `;
    }

    // √Åp d·ª•ng theme ngay
    applyTheme();

    // L·∫Øng nghe thay ƒë·ªïi theme
    tg.onEvent("themeChanged", applyTheme);
</script>

</body>
</html>
