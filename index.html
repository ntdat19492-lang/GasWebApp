<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>MiniApp Safe Under Close (Fullscreen Only)</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style id="app-style">
        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            background: #ffffff;
        }
    </style>
</head>

<body>

<h2>Mini App</h2>
<p>N·ªôi dung n√†y s·∫Ω t·ª± l√πi xu·ªëng d∆∞·ªõi n√∫t ƒë√≥ng n·∫øu ƒëang ·ªü FULLSCREEN 3.</p>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    function updateSafeArea() {
        // üöÄ Ki·ªÉm tra launchMode UI m·ªõi
        // C√≥ th·ªÉ l√†: "fullscreen", "partial", "popup"
        const mode = tg.launchParams?.launchMode || "";

        if (mode !== "fullscreen") {
            // ‚ùó Kh√¥ng fullscreen ‚Üí gi·ªØ nguy√™n
            return;
        } else {
            // üÜï Safe area UI m·ªõi Telegram
            const inset = tg.safeAreaInset;
    
            // UI m·ªõi: n√∫t ƒë√≥ng (X) n·∫±m th·∫•p h∆°n safe-area kho·∫£ng 48px
            const closeButtonHeight = 48;
    
            const topPadding = inset.top + closeButtonHeight;
            const bottomPadding = inset.bottom;
    
            // C·∫≠p nh·∫≠t CSS
            const style = document.getElementById("app-style");
            style.innerHTML = `
                body {
                    margin: 0;
                    padding: ${topPadding}px 100px ${bottomPadding}px 16px;
                    font-family: sans-serif;
                    background: #ffffff;
                    box-sizing: border-box;
                }
            `;
        }
    }

    // √Åp d·ª•ng khi load
    updateSafeArea();

    // √Åp d·ª•ng l·∫°i khi thay ƒë·ªïi viewport (UI m·ªõi)
    tg.onEvent("viewportChanged", updateSafeArea);
</script>

</body>
</html>
